---
title: Import components into model-driven apps in Microsoft Dataverse | Microsoft Docs
description: This article describes how to import code components into model-driven apps in Microsoft Dataverse.
ms.author: noazarur
author: noazarur-microsoft
manager: lwelicki
ms.date: 08/16/2022
ms.reviewer: jdaly
ms.topic: article
ms.subservice: pcf
contributors:
 - JimDaly
---

# Package a code component

This article describes how to import code components into Microsoft Dataverse. After implementing the code components using Microsoft Power Platform CLI, the next step is to bundle all the code component elements into a solution file and import the solution file into Dataverse so that you can see the code components in runtime.

[!INCLUDE[cc-terminology](../data-platform/includes/cc-terminology.md)]

To create and import a solution file:

1. Create a new folder inside the sample component folder and name it as **Solutions** (or any name of your choice) using the command `mkdir Solutions`. Navigate into the directory using the command `cd Solutions`.

2. Create a new solutions project using the [pac solution init](/power-platform/developer/cli/reference/solution) command. The solution project is used for bundling the code component into a solution zip file that is used for importing into Dataverse.
   
   ```CLI
   pac solution init --publisher-name developer --publisher-prefix dev
   ```

   > [!NOTE]
   > The `publisher-name` and `publisher-prefix` values must be unique to your environment.
 
3. Once the new solution project is created, refer the **Solutions** folder to the location where the created sample component is located. You can add the reference using the [pac solution add-reference](/power-platform/developer/cli/reference/solution) command. This reference informs the solution project about which code components should be added during the build. You can add references to multiple components in a single solution project.

   ```CLI   
    pac solution add-reference --path c:\downloads\mysamplecomponent
   ```

3. To generate a zip file from the solution project, go into your solution project directory and build the project using the following command. This command uses *MSBuild* to build the solution project by pulling down the *NuGet* dependencies as part of the restore. Use the `/restore` only for the first time when the solution project is built. For every build after that, you can run the command `msbuild`.

   ```CLI
   msbuild /t:build /restore
   ```

    > [!TIP]
    > - If msbuild 15.9.* is not in the path, open Developer Command Prompt for VS 2017 to run the `msbuild` commands.
    > - Building the solution in the *debug* configuration generates an unmanaged solution package. A managed solution package is generated by building the solution in *release* configuration. These settings can be overridden by specifying the `SolutionPackageType` property in the `cdsproj` file.
    > - You can set the msbuild configuration to `Release` to issue a production build. Example: `msbuild /p:configuration=Release`
    > - If you encounter an error that says *Ambiguous project name* when running the `msbuild` command on your solution, ensure that your solution name and project name are not the same.

4. The generated solution files are located inside the `\bin\debug\` folder after the build is successful.
5. Manually [import the solution into Dataverse](../../maker/data-platform/import-update-export-solutions.md) using the web portal or automatically using the [Microsoft Power Platform Build Tools](https://marketplace.visualstudio.com/items?itemName=microsoft-IsvExpTools.PowerPlatform-BuildTools).

## Connecting to your environment

You can deploy the code components directly from Microsoft Power Platform CLI by connecting to the Dataverse environment and then pushing the updated components.

Follow the steps below to create the authentication profile, connect to Dataverse, and push the updated components. 
 
1. Create your authentication profile using the [pac auth create](/power-platform/developer/cli/reference/auth) command: 
 
    ```CLI
    pac auth create --url https://xyz.crm.dynamics.com 
    ```
 
2. If you have previously created an authentication profile, you can view all the existing profiles using the [pac auth list](/power-platform/developer/cli/reference/auth) command: 

   ```CLI
    pac auth list 
   ```
 
3. To switch between the previously created authentication profiles, use the [pac auth select](/power-platform/developer/cli/reference/auth) command: 
   
   ```CLI
    pac auth select --index <index of the active profile>
    ``` 

4. To get the basic information about the environment, use the [pac org who](/power-platform/developer/cli/reference/org) command. The connection will be made using the default authentication profile. 

    ```CLI
    pac org who 
    ```
 
5. To delete a particular authentication profile, use the [pac auth delete](/power-platform/developer/cli/reference/auth) command `pac auth delete --index <index of the profile>`. 
6. If you want to clear all the authentication profiles from your local machine, use the [pac auth clear](/power-platform/developer/cli/reference/auth) command.. This action is irreversible because it completely deletes the `authprofile.json` file and token cache file from your local machine. 

## Deploying code components 

After you have successfully created an authentication profile, you can start pushing the code components to the Dataverse instance with all the latest changes. 

The `push` capability speeds up the inner-developer cycle development because it bypasses the code component versioning requirements and does not require that you build your solution (cdsproj) to import the code component. 

To use the `push` capability, do the following:

1. Ensure that you have a valid authentication profile created.
2. Navigate to the directory where the sample component file is located.
3. Run the [pac pcf push](/power-platform/developer/cli/reference/pcf) command.

   ```CLI
   pac pcf push --publisher-prefix <your publisher prefix>
   ```

   > [!NOTE]
   > The publisher prefix that you use with the `push` command should match the publisher prefix of your solution in which the components will be included.

## Create a solution project based on an existing solution in Dataverse

To create a solution project based on an existing solution in Dataverse, run the [pac solution clone](/power-platform/developer/cli/reference/solution) command.. To do so:

1. Ensure that you have a valid authentication profile created.
2. Run the command:

   ```CLI
   pac solution clone –-name(-n) <name of the solution to be exported> --targetversion(-v) <version of your solution> --include(-i) <settings that should be included>
   ```

   > [!NOTE]
   > Settings Values: autonumbering, calendar, customization, emailtracking, externalapplications, general, isvconfig, marketing, outlooksynchronization, relationshiproles, sales.

More information: [Settings options](/dotnet/api/microsoft.crm.sdk.messages.exportsolutionrequest)

> [!NOTE]
> Manually publish the customizations if you are importing unmanaged solution.

## Create a plug-in project and add a reference to it in your solution

> [!NOTE]
> The plugin command is in public preview and 
Microsoft Power Platform CLI now supports creating a plug-in project and packaging it in a solution by adding a reference to the plug-in project. The [pac plugin init](/power-platform/developer/cli/reference/plugin) command creates the template files (csproj, Plugin.cs & ServiceHelper.cs) in the directory. To do so: 

1. Ensure that you have a valid authentication profile created.
2. Navigate to the root directory where you want the project to be created.
3. Run the [pac auth create](/power-platform/developer/cli/reference/auth) command:

   ```CLI
   pac auth create –url <https://xyz.crm.dynamics.com>
   ```
4. Run the [pac plugin init](/power-platform/developer/cli/reference/plugin) command to create the plug-in project

   ```CLI
   pac plugin init
   ```

5. Add a reference to your solution project  using the [pac solution add-reference](/power-platform/developer/cli/reference/solution) command so that the plug-in project gets built when the solution is built.

   ```CLI
   pac solution add-reference –path <path to your plugin project>
   ```

6. Run the command to build the solution and the referenced plug-in.

   ```CLI
   msbuild
   ```

## Remove components from a solution

If you want to remove a code component from a solution file:

1. Edit the `cdsproj` file in the solution project directory and remove the references to the component. Here is an example of a component reference:

   ```XML
   <ItemGroup>
       <Projectreference Include="..\pcf_component\pcf_component.pcfproj">
         <Project>0481bd83-ffb0-4b70-b526-e0b3dd63e7ef</Project>
         <Name>pcf_component</Name>
         <Targets>Build</Targets>
         <referenceOutputAssembly>false</referenceOutputAssembly>
         <OutputItemType>Content</OutputItemType>
         <CopyToOutputDirectory>Always</CopyToOutputDirectory>
       </Projectreference>
   </ItemGroup>
   ```

2. Perform a rebuild (or clean) using the following command:
   
    ```CLI
    msbuild /t:rebuild
    ```

### See also

[Add code components to a column or table in model-driven apps](add-custom-controls-to-a-field-or-entity.md)<br/>
[Add components to a canvas app](component-framework-for-canvas-apps.md#add-components-to-a-canvas-app)<br/>
[Power Apps component framework API reference](reference/index.md)<br/>
[Power Apps component framework overview](overview.md)<br />
[Microsoft Power Platform CLI Command Groups](/power-platform/developer/cli/reference/)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]